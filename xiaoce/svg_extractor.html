<!DOCTYPE html>
<html>

<head>
	<title>SVG Path Extractor</title>
	<script src="/xiaoce/svg_extractor.js"></script>
	<style>
		table {
			border-collapse: collapse;
			width: 100%;
		}

		th,
		td {
			border: 1px solid black;
			padding: 8px;
			text-align: left;
		}

		th {
			background-color: #f2f2f2;
		}
	</style>
</head>

<body>
	<h1>SVG Path Extractor</h1>
	<input type="file" id="svgFile" accept=".svg">
	<br>
	<label for="pathType">Select tag type to extract:</label>
	<select id="pathType">
        <option value="path">Path</option>
        <option value="circle">Circle</option>
    </select>
	<br>
	<div>
		<label for="displayType">Select display type:</label>
		<select id="displayType">
            <option value="text">Text</option>
            <option value="table">Table</option>
        </select>
	</div>
	<button id="extractBtn">Extract Paths</button>
	<br>
	<div id="textDisplay" style="display: none;">
		<ul id="pathList"></ul>
	</div>
	<div id="tableDisplay" style="display: none;">
		<table id="pathTable">
			<tr>
				<th>ID</th>
				<th>Title</th>
			</tr>
		</table>
	</div>
	<p>Version 1.4, made by GPT-3.5</p>
	<p>Supported sources: amcharts, mapsvg, simplemaps...</p>
	<p>Supported tags: path, circle...</p>
	<p>Supported display formats: text/table</p>
	<p>If id is Simplified Chinese, treat id as name.</p>
	<script>
		$(document).ready(function() {
    $("#extractBtn").click(function() {
        var file = $("#svgFile")[0].files[0];
        var selectedTag = $("#pathType").val();
        if (file) {
            var reader = new FileReader();
            reader.onload = function(e) {
                var svgText = e.target.result;
                var svg = $(svgText);
                var elements = svg.find(selectedTag);
                var displayType = $("#displayType").val();
                if (displayType === "text") {
                    var pathList = $("#pathList");
                    pathList.empty();
                    elements.each(function() {
                        var id = $(this).attr('id');
                        var title = $(this).attr('title') || $(this).attr('name');
                        if (!title && /[\u4e00-\u9fa5]/.test(id)) {
                            title = id;
                            id = id + id; // 将ID打印两遍
                        }
                        pathList.append("<li>" + id + "," + title + "</li>");
                    });
                    $("#textDisplay").show();
                    $("#tableDisplay").hide();
                } else if (displayType === "table") {
                    var pathTable = $("#pathTable");
                    pathTable.find("tr:gt(0)").remove(); // Clear existing rows
                    elements.each(function() {
                        var id = $(this).attr('id');
                        var title = $(this).attr('title') || $(this).attr('name');
                        if (!title && /[\u4e00-\u9fa5]/.test(id)) {
                            title = id;
                            id = id;
                        }
                        pathTable.append("<tr><td>" + id + "</td><td>" + title + "</td></tr>");
                    });
                    $("#tableDisplay").show();
                    $("#textDisplay").hide();
                }
            };
            reader.readAsText(file);
        } else {
            alert("Please select an SVG file to extract paths from.");
        }
    });
});
	</script>
</body>

</html>